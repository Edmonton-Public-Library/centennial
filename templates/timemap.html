<!DOCTYPE html>
<html xmlns:fb="http://ogp.me/ns/fb#">
<head>
	<title>Home</title>

	<!-- Styling -->
	<link rel="stylesheet/less" type="text/css" href="{{ STATIC_URL }}styles/reset.less" />
	<link rel="stylesheet/less" type="text/css" href="{{ STATIC_URL }}styles/epl-general.less" />
    <link rel="stylesheet/less" type="text/css" href="{{ STATIC_URL }}styles/timemap.less" />
	<link rel="stylesheet/less" type="text/css" href="{{ STATIC_URL }}styles/questPopUp.less" />
	<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}styles/timeline.css" />
	<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}styles/jPlayer-skin/jplayer.blue.monday.css" />

	<!-- General Libraries -->
	<script type="text/javascript" src="{{ STATIC_URL }}/js/lib/require-jquery.js" data-main="/static/js/init-timemap.js"></script>
    <script>
        var KEYS = {{ KEYS }};
    </script>
    <meta property='fb:app_id' content='150662938425048'/>

    <!-- Prevent page zooming on mobile devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="viewport" content="width=device-width" />
</head>
<body>

    <div id="fb-root"></div>
    <script>
		window.fbAsyncInit = function() {
			// init the FB JS SDK
			FB.init({
                appId      : '150662938425048',
				//appId      : Settings.apiKeys.facebook.connect, // App ID from the App Dashboard
				//channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File for x-domain communication
				status     : true, // check the login status upon init?
				cookie     : true, // set sessions cookies to allow your server to access the session?
				xfbml      : true  // parse XFBML tags on this page?
			});
		};

		// Load the SDK's source Asynchronously
		// Note that the debug version is being actively developed and might
		// contain some type checks that are overly strict.
		// Please report such bugs using the bugs tool.
		(function(d, debug){
		   var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
		   if (d.getElementById(id)) {return;}
		   js = d.createElement('script'); js.id = id; js.async = false;
		   js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
		   ref.parentNode.insertBefore(js, ref);
		 }(document, /*debug*/ false));
    </script>

    <div id="epl-bar">
    	    <a href="http://www.epl.ca/"><img class="logo" src="/static/images/epl-logo.png" alt="EPL Logo"/></a>
    	    <ul class="buttons">
                <li class="help" onClick="window.open('{{ STATIC_URL }}views/help.html', '_blank', 'toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=700px,height=800px');">Help</li>
    			<li data-role="account">
    				<img class="icon"/>
    				<span data-role="name">Login</span>
    				<div class="menu" data-bind="authenticateSubmit: {username: 'auth-username', password: 'auth-password'}">
    					<p class="section-title">Authenticate</p>
                        <form method="post" action="#" data-bind="loginForm: true">
        					<input id="auth-username" data-role="username" type="text" class="epl-input text" data-default-text="Username" />
        					<input id="auth-password" data-role="password" type="password" class="epl-input text" data-default-text="Password" />
        					<input type="submit" class="save-button" value="Log In" />
                        </form>
    					<div class="save-button-space"></div>
    				</div>
    			</li>
    	    </ul>
    	    <div class="fb-like" data-send="true" data-bind="attr: {'data-href': baseURL()}" data-width="250" data-show-faces="false" data-font="arial"></div>
    	<div id="timeline" data-bind="style: {height: Environment.chrome.timeline.height() + 'px'}, css: {active: Environment.chrome.timeline.height() > 0}"></div>
    </div>
    <div id="tm-sidebar">
    	<div class="contents" data-bind="style: {marginTop: Environment.display.topBarHeight() + 'px'}">
    		<ul class="tabs">
    			<li class="tab" data-tab="features">
    				Featured
    				<div class="indicator"></div>
    			</li>
    			<li class="tab" class="active" data-tab="search">
    				Search
    				<div class="indicator"></div>
    			</li>
    		</ul>
    		<div class="tab-containers">
    			<div class="tab-contents" data-tab="features">
    				<div class="results" data-bind="style: {height: featuredHeight() + 'px'}">
                        <!-- ko ifnot: featuredStories().length > 0 -->
                            <div class="search-result">
                                <p class="title">No Stories</p>
                                <p class="description">No featured stories have been set.</p>
                            </div>
                        <!-- /ko -->
                        <!-- ko foreach: {data: featuredStories(), as: 'result'} -->
                        <div class="search-result linked" data-bind="click: $root.featuredClick, style: {'z-index' : $root.featuredStories().length - $index()}, attr: {class: 'search-result linked ' + result.story.content_type}">
                            <p class="title" data-bind="text: result.story.title"></p>
                            <p class="description" data-bind="text: result.story.description"></p>
                        </div>
                        <!-- /ko -->
                    </div>
    			</div>
    			<div class="tab-contents" data-tab="search">
    				<input type="text" id="search-box-text" class="epl-input text search-box" data-default-text="Start typing to search..."/>
                    <div id="search-year-range">
                        <input type="text" id="search-year-start" class="epl-input text search-box-year-start" data-default-text="Min Year" maxLength="4"/> -
                        <input type="text" id="search-year-end" class="epl-input text search-box-year-end" data-default-text="Max Year" maxLength="4"/>
                    </div>
                    <select id="search-box-content-type" class="epl-input select search-select">
                        <option>Filter by content type...</option>
                        <option>Audio</option>
                        <option>Image</option>
                        <option>Link</option>
                        <option>PDF</option>
                        <option>Text</option>
                        <option>Video</option>
                    </select>

                    <div class="results" data-bind="style: {height: searchHeight() + 'px'}">
    					<!-- ko ifnot: searchResults().length > 0 -->
    					<div class="search-result">
    						<p class="title">No results.</p>
    						<p class="description">Begin typing in the search box to narrow your query.</p>
    					</div>
    					<!-- /ko -->
    					<!-- ko foreach: {data: searchResults(), as: 'result'} -->
    					<div class="search-result linked" data-bind="click: $root.resultClick, style: {'z-index' : $root.searchResults().length - $index()}, attr: {class: 'search-result linked ' + result.content_type}">
                            <p class="title" data-bind="text: result.title"></p>
                            <!-- ko if: result.branch != null -->
    						<p class="branch-name" data-bind="text: result.branch.name"></p>
                            <!-- /ko -->
                            <!-- ko if: result.description.length > 200 -->
        						<p class="description" data-bind="text: result.description.substring(0, 200) + ' ...'"></p>
                            <!-- /ko -->
                            <!-- ko if: result.description.length <= 200 -->
                                <p class="description" data-bind="text: result.description"></p>
                            <!-- /ko -->
    					</div>
    					<!-- /ko -->
    				</div>
    			</div>
    		</div>
    	</div>
    </div>
	<div data-role="viewport" data-bind="
    style: {
        width: Environment.display.viewportWidth() + 'px',
        height: Environment.display.viewportHeight() + 'px'
    }"></div>

    <div id="questPopUp" class="questPopUp">
        <img src="/static/images/x.png" class="questPopUpCloseButton"></img>
        <div class="questPopUpText">
            <div class="questPopUpTitle"></div>
            <div class="questPopUpDescription"></div>
        </div>
        <div class="questPopUpPointsDisplay">
            <div class="questPopUpPts">pts</div>
            <div class="questPopUpPoints questPopUpPts"></div>
        </div>
        <div class="questPopUpArrows">
            <img src="/static/images/arrow_right.png" class="questPopUpRightArrow questPopUpFloatingNumbers"></img>
            <div class="questPopUpTotalNumber questPopUpFloatingNumbers"></div>
            <div class="questPopUpFloatingNumbers">/</div>
            <div class="questPopUpCurrentNumber questPopUpFloatingNumbers"></div>
            <img src="/static/images/arrow_left.png" class="questPopUpLeftArrow questPopUpFloatingNumbers"></img>
        </div>
    </div>
</body>
</html>
